alter table titulo_pagar
add ID_LOTE_TPB  VARCHAR(36) CHARACTER SET ISO8859_1;
alter table titulo_receber
add ID_LOTE_TRB  VARCHAR(36) CHARACTER SET ISO8859_1;


ALTER TABLE CEDENTE ADD SACADO VARCHAR(1);
ALTER TABLE CEDENTE ADD STATUS VARCHAR(20);
ALTER TABLE CEDENTE ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE CEDENTE ADD DIGITO_CONTA_CONTABIL VARCHAR(1);
ALTER TABLE CEDENTE ADD DATA_ULTIMA_ATUALIZACAO TIMESTAMP;
ALTER TABLE CEDENTE ADD CODIGO VARCHAR(10);
ALTER TABLE CONTA_BANCARIA ADD CONTA_INTERNA VARCHAR(20);
ALTER TABLE CONTA_BANCARIA ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE CONTA_BANCARIA ADD DIGITO_CONTA_CONTABIL VARCHAR(1);
ALTER TABLE CONTA_BANCARIA_CREDITO ADD CONTA_CONTABIL_CREDITO VARCHAR(20);
ALTER TABLE CONTA_BANCARIA_CREDITO ADD CONTA_CONTABIL_DEBITO VARCHAR(20);
ALTER TABLE CONTA_BANCARIA_CREDITO ADD DIGITO_CONTA_CONTABIL_CREDITO VARCHAR(1);
ALTER TABLE CONTA_BANCARIA_CREDITO ADD DIGITO_CONTA_CONTABIL_DEBITO VARCHAR(1);
ALTER TABLE CONTA_BANCARIA_DEBITO ADD CONTA_CONTABIL_CREDITO VARCHAR(20);
ALTER TABLE CONTA_BANCARIA_DEBITO ADD CONTA_CONTABIL_DEBITO VARCHAR(20);
ALTER TABLE CONTA_BANCARIA_DEBITO ADD DIGITO_CONTA_CONTABIL_DEBITO VARCHAR(1);
ALTER TABLE CONTA_BANCARIA_DEBITO ADD DIGITO_CONTA_CONTABIL_CREDITO VARCHAR(1);
ALTER TABLE CONTA_BANCARIA_TRANSFERENCIA ADD CONTA_CONTABIL_CREDITO VARCHAR(20);
ALTER TABLE CONTA_BANCARIA_TRANSFERENCIA ADD CONTA_CONTABIL_DEBITO VARCHAR(20);
ALTER TABLE CONTA_BANCARIA_TRANSFERENCIA ADD DIGITO_CONTA_CONTABIL_CREDITO VARCHAR(1);
ALTER TABLE CONTA_BANCARIA_TRANSFERENCIA ADD DIGITO_CONTA_CONTABIL_DEBITO VARCHAR(1);
ALTER TABLE CONTA_CONTABIL ADD DATA_REGISTRO TIMESTAMP;
ALTER TABLE FORMA_PAGAMENTO ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE FORMA_PAGAMENTO ADD DIGITO_CONTA_CONTABIL VARCHAR(1);
ALTER TABLE HISTORICO ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE HISTORICO ADD DIGITO_CONTA_CONTABIL VARCHAR(1);
ALTER TABLE HISTORICO ADD PRODUTO VARCHAR(200);
ALTER TABLE ORGANIZACAO ADD ATIVA SMALLINT DEFAULT 1;
ALTER TABLE SACADO ADD CODIGO_CEDENTE VARCHAR(36);
ALTER TABLE SACADO ADD CONTA_CONTABIL VARCHAR(36);
ALTER TABLE SACADO ADD DIGITO_CONTA_CONTABIL VARCHAR(1);
ALTER TABLE SACADO ADD DATA_REGISTRO TIMESTAMP;
ALTER TABLE SACADO ADD DATA_ULTIMA_ATUALIZACAO TIMESTAMP;
ALTER TABLE SACADO ADD CODIGO VARCHAR(10);
ALTER TABLE SACADO ADD ID_CCT_OLD VARCHAR(36);
ALTER TABLE TESOURARIA_CREDITO ADD CONTA_CONTABIL_CREDITO VARCHAR(20);
ALTER TABLE TESOURARIA_CREDITO ADD CONTA_CONTABIL_DEBITO VARCHAR(20);
ALTER TABLE TESOURARIA_CREDITO ADD DIGITO_CONTA_CONTABIL_CREDITO VARCHAR(1);
ALTER TABLE TESOURARIA_CREDITO ADD DIGITO_CONTA_CONTABIL_DEBITO VARCHAR(1);
ALTER TABLE TESOURARIA_DEBITO ADD CONTA_CONTABIL_CREDITO VARCHAR(20);
ALTER TABLE TESOURARIA_DEBITO ADD CONTA_CONTABIL_DEBITO VARCHAR(20);
ALTER TABLE TESOURARIA_DEBITO ADD DIGITO_CONTA_CONTABIL_CREDITO VARCHAR(1);
ALTER TABLE TESOURARIA_DEBITO ADD DIGITO_CONTA_CONTABIL_DEBITO VARCHAR(1);
ALTER TABLE TIPO_CEDENTE ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE TIPO_OPERACAO_BANCARIA ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE TIPO_OPERACAO_BANCARIA ADD DIGITO_CONTA_CONTABIL VARCHAR(1);
ALTER TABLE TIPO_SACADO ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE TITULO_PAGAR ADD CONTA_CONTABIL_DEBITO VARCHAR(20);
ALTER TABLE TITULO_PAGAR ADD DIGITO_CONTA_CONTABIL_CREDITO VARCHAR(1);
ALTER TABLE TITULO_PAGAR ADD CONTA_CONTABIL_CREDITO VARCHAR(20);
ALTER TABLE TITULO_PAGAR ADD DIGITO_CONTA_CONTABIL_DEBITO VARCHAR(1);
ALTER TABLE TITULO_PAGAR_BAIXA ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE TITULO_PAGAR_BAIXA ADD DIGITO_CONTA_CONTABIL VARCHAR(1);
ALTER TABLE TITULO_PAGAR_BAIXA_AC ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE TITULO_PAGAR_BAIXA_AC ADD DIGITO_CONTA_CONTABIL VARCHAR(1);
ALTER TABLE TITULO_PAGAR_BAIXA_CHEQUE ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE TITULO_PAGAR_BAIXA_CHEQUE ADD DIGITO_CONTA_CONTABIL VARCHAR(1);
ALTER TABLE TITULO_PAGAR_BAIXA_DE ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE TITULO_PAGAR_BAIXA_DE ADD DIGITO_CONTA_CONTABIL VARCHAR(1);
ALTER TABLE TITULO_PAGAR_BAIXA_FP ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE TITULO_PAGAR_BAIXA_FP ADD DIGITO_CONTA_CONTABIL VARCHAR(1);
ALTER TABLE TITULO_PAGAR_BAIXA_INTERNET ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE TITULO_PAGAR_BAIXA_INTERNET ADD DIGITO_CONTA_CONTABIL VARCHAR(1);
ALTER TABLE TITULO_RECEBER ADD CONTA_CONTABIL_CREDITO VARCHAR(20);
ALTER TABLE TITULO_RECEBER ADD CONTA_CONTABIL_DEBITO VARCHAR(20);
ALTER TABLE TITULO_RECEBER ADD DIGITO_CONTA_CONTABIL_CREDITO VARCHAR(1);
ALTER TABLE TITULO_RECEBER ADD DIGITO_CONTA_CONTABIL_DEBITO VARCHAR(1);
ALTER TABLE TITULO_RECEBER_BAIXA ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE TITULO_RECEBER_BAIXA ADD DIGITO_CONTA_CONTABIL VARCHAR(1);
ALTER TABLE TITULO_RECEBER_BAIXA_AC ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE TITULO_RECEBER_BAIXA_AC ADD DIGITO_CONTA_CONTABIL VARCHAR(1);
ALTER TABLE TITULO_RECEBER_BAIXA_CHEQUE ADD DIGITO_CONTA_CONTABIL VARCHAR(1);
ALTER TABLE TITULO_RECEBER_BAIXA_CHEQUE ADD LOTE_DEPOSITO VARCHAR(111);
ALTER TABLE TITULO_RECEBER_BAIXA_CHEQUE ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE TITULO_RECEBER_BAIXA_DE ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE TITULO_RECEBER_BAIXA_DE ADD DIGITO_CONTA_CONTABIL VARCHAR(1);
ALTER TABLE TITULO_RECEBER_BAIXA_FP ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE TITULO_RECEBER_BAIXA_FP ADD DIGITO_CONTA_CONTABIL VARCHAR(1);
ALTER TABLE TITULO_RECEBER_BAIXA_INTERNET ADD CONTA_CONTABIL VARCHAR(20);
ALTER TABLE TITULO_RECEBER_BAIXA_INTERNET ADD DIGITO_CONTA_CONTABIL VARCHAR(1);
ALTER TABLE TITULO_RECEBER_HISTORICO ADD ID_CONTA_CONTABIL_DEBITO VARCHAR(36);
ALTER TABLE SERVIDOR_EMAIL DROP CONSTRAINT PK_SERVIDOR_EMAIL;
ALTER TABLE SERVIDOR_EMAIL ALTER COLUMN ID_SERVIDOR_EMAIL TYPE VARCHAR(36);
ALTER TABLE USUARIO ALTER COLUMN NOME TYPE VARCHAR(50);
ALTER TABLE TITULO_PAGAR_BAIXA_CC DROP CONSTRAINT PK_TITULO_PAGAR_BAIXA_CC;
ALTER TABLE TITULO_PAGAR_BAIXA_CC DROP CONSTRAINT FK_TITULO_PAGAR_BAIXA_CC_1;
ALTER TABLE TITULO_PAGAR_BAIXA_CC DROP CONSTRAINT FK_TITULO_PAGAR_BAIXA_CC_2;

ALTER TABLE TITULO_PAGAR_RATEIO_HST DROP CONSTRAINT PK_TIT_PAG_RATEIO_HST;
ALTER TABLE TITULO_PAGAR_RATEIO_HST DROP CONSTRAINT FK_TIT_PAG_HISTORICO_1;
ALTER TABLE TITULO_PAGAR_RATEIO_HST DROP CONSTRAINT FK_TIT_PAG_HISTORICO_2;
ALTER TABLE TITULO_PAGAR_RATEIO_HST DROP CONSTRAINT FK_TIT_PAG_HISTORICO_3;

ALTER TABLE TITULO_RECEBER_BAIXA_CC DROP CONSTRAINT PK_TIT_RECEBER_BAIXA_CC;
ALTER TABLE TITULO_RECEBER_BAIXA_CC DROP CONSTRAINT FK_TITULO_RECEBER_BAIXA_CC_1;
ALTER TABLE TITULO_RECEBER_BAIXA_CC DROP CONSTRAINT FK_TITULO_RECEBER_BAIXA_CC_2;
ALTER TABLE TITULO_RECEBER_RATEIO_HST DROP CONSTRAINT PK_TIT_RCB_RATEIO_HST;
ALTER TABLE TITULO_RECEBER_RATEIO_HST DROP CONSTRAINT FK_TIT_RCB_HISTORICO_1;
ALTER TABLE TITULO_RECEBER_RATEIO_HST DROP CONSTRAINT FK_TIT_RCB_HISTORICO_2;
ALTER TABLE TITULO_RECEBER_RATEIO_HST DROP CONSTRAINT FK_TIT_RCB_HISTORICO_3;
UPDATE RDB$RELATION_FIELDS SET RDB$NULL_FLAG = 1 WHERE RDB$FIELD_NAME='ID_ORGANIZACAO' AND RDB$RELATION_NAME='BANCO';
UPDATE RDB$RELATION_FIELDS SET RDB$NULL_FLAG = NULL WHERE RDB$FIELD_NAME='NUMERO_DOCUMENTO' AND RDB$RELATION_NAME='TITULO_PAGAR';
UPDATE RDB$RELATION_FIELDS SET RDB$NULL_FLAG = NULL WHERE RDB$FIELD_NAME='ID_TIPO_SACADO' AND RDB$RELATION_NAME='SACADO';
DROP TABLE TITULO_RECEBER_RATEIO_HST;
DROP TABLE TITULO_RECEBER_BAIXA_CC;
DROP TABLE TITULO_PAGAR_RATEIO_HST;
DROP TABLE TITULO_PAGAR_BAIXA_CC;



CREATE OR ALTER TRIGGER CEDENTE_BIU0 FOR CEDENTE
ACTIVE BEFORE INSERT OR UPDATE POSITION 0
AS
DECLARE VARIABLE VL_CODIGO         INTEGER;
declare variable vl_data timestamp;
begin
  /* Trigger text */
  vl_data = CURRENT_TIMESTAMP;

  if(new.data_registro is null) then begin
    NEW.data_registro = vl_data;
  end

    if(new.DATA_ULTIMA_ATUALIZACAO is null) then begin
    NEW.DATA_ULTIMA_ATUALIZACAO = vl_data;
  end

  if (new.id_tipo_cedente is null) then begin
  NEW.id_tipo_cedente = '1';
  end

  if (NEW.id_organizacao is null) then BEGIN
  NEW.id_organizacao = 'sbba';
  end


  if (NEW.codigo is null) then BEGIN
     SELECT max(cast(codigo as integer))+1 FROM CEDENTE INTO :vl_codigo;
   NEW.codigo = vl_codigo;
   END

   if (new.personalidade is null ) then begin
       new.personalidade = 'PJ' ;
  end

  if (new.status is null) then begin
  new.status = 'ATIVO';
  end


   if(NEW.id_cedente is null) then BEGIN
      NEW.id_cedente = CREATEGUID();
      END
end

